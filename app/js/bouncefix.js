/*!
 * v0.2.1
 * Copyright (c) 2013 Jarid Margolin
 * bouncefix.js is open sourced under the MIT license.
 */
!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("bouncefix",this,function(){function a(a){return a?(this.className=a,this.startListener=new b(document,{evt:"touchstart",handler:this.touchStart,context:this}).add(),this.endListener=new b(document,{evt:"touchend",handler:this.touchEnd,context:this}).add(),void 0):!1}function b(a,b){this.evt=b.evt,this.el=a,this.handler=b.handler,b.context&&(this.handler=function(a){b.handler.call(b.context,a)})}var c={Fix:a,cache:{}};c.add=function(a){this.cache[a]||(this.cache[a]=new this.Fix(a))},c.remove=function(a){this.cache[a]&&(this.cache[a].remove(),delete this.cache[a])},a.prototype.touchStart=function(a){if(this.target=d.getTargetedEl(a.target,this.className),this.target){if(d.isScrollable(this.target))return d.scrollToEnd(this.target);this.moveListener||(this.moveListener=new b(this.target,{evt:"touchmove",handler:this.touchMove,context:this}).add())}},a.prototype.touchMove=function(a){a.preventDefault()},a.prototype.touchEnd=function(){this.moveListener&&(this.moveListener.remove(),this.moveListener=null)},a.prototype.remove=function(){this.startListener.remove(),this.endListener.remove()};var d={};return d.getTargetedEl=function(a,b){for(;;){if(a.classList.contains(b))break;if(!(a=a.parentElement))break}return a},d.isScrollable=function(a){return a.scrollHeight>a.offsetHeight},d.scrollToEnd=function(a){var b=a.scrollTop,c=a.offsetHeight,d=a.scrollHeight;0>=b&&(a.scrollTop=1),b+c>=d&&(a.scrollTop=d-c-1)},b.prototype.add=function(){return this.el.addEventListener(this.evt,this.handler,!1),this},b.prototype.remove=function(){return this.el.removeEventListener(this.evt,this.handler),this},c});